(function(){"use strict";var e={3292:function(e,t,s){var o=s(6369),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app"},[t("Header"),t("router-view",{staticClass:"main"}),t("Footer")],1)},n=[],i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[e.user?t("button",{staticClass:"green-button",on:{click:e.logout}},[e._v(" Logout ")]):e._e()])},a=[],l=(s(7658),{name:"Header",computed:{user(){return this.$store.getters.user}},methods:{logout(){this.$store.commit("removeUser"),this.$router.push("/login")}}}),u=l,c=s(1001),d=(0,c.Z)(u,i,a,!1,null,"e93a10da",null),p=d.exports,m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"footer"})},v=[],f={name:"Footer"},h=f,g=(0,c.Z)(h,m,v,!1,null,"059aa5c5",null),_=g.exports,y={name:"HomeView",components:{Header:p,Footer:_}},b=y,T=(0,c.Z)(b,r,n,!1,null,null,null),w=T.exports,C=s(2631),x=function(){var e=this,t=e._self._c;return t("div",[t("Home")],1)},U=[],O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("h1",{staticClass:"home-title"},[e._v("User data and Todo list")]),t("div",{staticClass:"home-user"},[e._v(" ID: "+e._s(e.user.id)),t("br"),e._v(" name: "+e._s(e.user.name)),t("br"),e._v(" email: "+e._s(e.user.email)),t("br"),e._v(" phone: "+e._s(e.user.phone)),t("br")]),t("div",{staticClass:"home-create"},[e._m(0),t("span",{staticClass:"klin"}),t("label",[t("span",[e._v("UserId:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.newUserId,expression:"newUserId"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.newUserId=t.target.multiple?s:s[0]}}},e._l(e.filterUserOptions,(function(s,o){return t("option",{key:o,domProps:{value:s}},[e._v(e._s(s))])})),0)]),t("span",{staticClass:"klin"}),t("label",[t("span",[e._v("Title")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newTitle,expression:"newTitle"}],attrs:{type:"text"},domProps:{value:e.newTitle},on:{input:function(t){t.target.composing||(e.newTitle=t.target.value)}}})]),t("span",{staticClass:"klin"}),t("button",{staticClass:"green-button",class:{"green-button--disabled":e.newTitle.length<2},attrs:{disabled:e.newTitle.length<2},on:{click:e.addTodo}},[e._v("Add")])]),t("div",{staticClass:"home-todos"},[t("div",{staticClass:"home-todos-filter"},[t("label",{staticStyle:{}},[t("span",[e._v("Type")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filterType,expression:"filterType"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.filterType=t.target.multiple?s:s[0]}}},e._l(e.filterTypeOptions,(function(s,o){return t("option",{key:o,domProps:{value:s.value}},[e._v(e._s(s.label))])})),0)]),t("label",[t("span",[e._v("User")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filterUser,expression:"filterUser"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.filterUser=t.target.multiple?s:s[0]}}},[t("option",{attrs:{value:"0"}},[e._v("All")]),e._l(e.filterUserOptions,(function(s,o){return t("option",{key:o,domProps:{value:s}},[e._v(e._s(s))])}))],2)]),t("label",[t("span",[e._v("Text")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"text"},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}})])]),t("div",[t("b",[e._v("Items: "+e._s(e.todos.length))])]),t("br"),e.todos.length?t("div",e._l(e.todos,(function(s){return t("Todo",{key:s.id,attrs:{item:s},on:{update:e.onUpdateFavorites}})})),1):t("div",[e._v("Nothing founded")])])])},S=[function(){var e=this,t=e._self._c;return t("span",[t("b",[e._v("Create todo:")])])}];const I="https://jsonplaceholder.typicode.com";class N{constructor(e){this.url=e,this.todos=[]}async getUsers(){try{const e=await fetch(this.url+"/users"),t=await e.json();return t}catch(e){return console.log(e),[]}}async getTodos(){try{const e=await fetch(this.url+"/todos"),t=await e.json(),s=JSON.parse(localStorage.getItem("favorites")||"[]");return this.todos=t.map((e=>({...e,favorit:s.includes(e.id)}))),this.todos}catch(e){return console.log(e),[]}}get todoList(){return this.todos}async addTodo(e,t){try{const s=await fetch(this.url+"/todos",{method:"POST",body:JSON.stringify({title:t,userId:e,completed:!1}),headers:{"Content-type":"application/json; charset=UTF-8"}}),o=await s.json();return this.todos.push(o),o}catch(s){return console.log(s),!1}}}var P=new N(I),Z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"todo"},[t("div",{staticClass:"todo-id"},[e._v(e._s(e.item.id))]),t("div",{staticClass:"todo-separator"},[e._v(" | ")]),t("div",{staticClass:"todo-title"},[e._v(e._s(e.item.title))]),t("div",{staticClass:"todo-separator"},[e._v(" | ")]),t("div",{staticClass:"todo-done"},[e._v(" "+e._s(e.item.completed?"*":"#")+" ")]),t("div",{staticClass:"todo-separator"},[e._v(" | ")]),e.item.favorit?t("button",{on:{click:e.removeFromFav}},[e._v(" Remove from fav ")]):t("button",{on:{click:e.addToFav}},[e._v(" Add to fav ")])])},k=[],F={name:"Todo",props:{item:{type:Object,default:()=>{}}},methods:{addToFav(){const e=JSON.parse(localStorage.getItem("favorites")||"[]");e.push(this.item.id),localStorage.setItem("favorites",JSON.stringify(e)),this.$emit("update")},removeFromFav(){let e=JSON.parse(localStorage.getItem("favorites"));e=e.filter((e=>e!==this.item.id)),localStorage.setItem("favorites",JSON.stringify(e)),this.$emit("update")}}},L=F,j=(0,c.Z)(L,Z,k,!1,null,"4142ad48",null),$=j.exports,A={name:"Home",components:{Todo:$},data(){return{todos:[],todosDefault:[],filterType:"all",filterTypeOptions:[{value:"all",label:"All"},{value:"completed",label:"Completed"},{value:"uncompleted",label:"Uncompleted"},{value:"favorites",label:"Favorites"}],filterUser:0,searchText:"",newTitle:"",newUserId:1}},computed:{user(){return this.$store.getters.user},filterUserOptions(){const e=new Set(this.todosDefault.map((e=>e.userId)));return Array.from(e)}},watch:{searchText(e){e.length>2||0===e.length?this.filterList():this.todos=[]},filterType(){this.filterList()},filterUser(){this.filterList()}},async created(){this.todosDefault=P.todoList.length?P.todoList:await P.getTodos(),this.todos=[...this.todosDefault]},methods:{filterList(){let e=[...this.todosDefault];e=this.filterByType(e),e=this.filterByUser(e),e=this.filterByText(e),this.todos=e},filterByType(e){if("favorites"===this.filterType){const t=localStorage.getItem("favorites")||[];return t?e.filter((e=>t.includes(e.id))):[]}return"completed"===this.filterType?e.filter((e=>e.completed)):"uncompleted"===this.filterType?e.filter((e=>!e.completed)):e},filterByUser(e){return Number(this.filterUser)?e.filter((e=>e.userId===this.filterUser)):e},filterByText(e){return 0===this.searchText?e:e.filter((e=>e.title.toLowerCase().includes(this.searchText)))},async addTodo(){await P.addTodo(this.newUserId,this.newTitle)},onUpdateFavorites(){const e=JSON.parse(localStorage.getItem("favorites")||"[]");this.todosDefault=this.todosDefault.map((t=>({...t,favorit:e.includes(t.id)}))),this.filterList()}}},D=A,J=(0,c.Z)(D,O,S,!1,null,"4ab57b72",null),V=J.exports,H={name:"HomeView",components:{Home:V}},B=H,E=(0,c.Z)(B,x,U,!1,null,null,null),q=E.exports,z=function(){var e=this,t=e._self._c;return t("div",[t("Login")],1)},M=[],R=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("h1",{staticClass:"login-title"},[e._v(" description ")]),t("div",{staticClass:"login-body"},[t("p",{staticClass:"login-body-description"},[e._v("description")]),t("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("div",{staticClass:"form-name"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"input",attrs:{type:"text",name:"name",placeholder:"Username"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e.errors.name?t("span",{staticClass:"form-error"},[e._v(" "+e._s(e.errors.name)+" ")]):e._e()]),t("div",{staticClass:"form-phone"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"input",attrs:{type:"text",name:"phone",placeholder:"Phone Number"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),e.errors.phone?t("span",{staticClass:"form-error"},[e._v(" "+e._s(e.errors.phone)+" ")]):e._e()]),t("button",{staticClass:"green-button form-button"},[e._v(" Login ")]),e.errors.login?t("div",{staticClass:"form-error"},[e._v(e._s(e.errors.login))]):e._e()])])])},G=[],K={name:"Login",data(){return{name:"",phone:"",errors:{name:"",phone:"",login:""}}},computed:{isFormValid(){return!this.errors.name&&!this.errors.phone}},methods:{async login(){if(this.name?this.nameValidation(this.name)||(this.errors.name="Enter valid username"):this.errors.name="This field is required",this.phone?this.phoneValidation(this.phone)||(this.errors.phone="Enter valid phone"):this.errors.phone="This field is required",this.isFormValid){const e=await P.getUsers();if(e.length){const t=e.find((e=>e.username===this.name&&e.phone===this.phone));t?(this.$store.commit("setUser",t),this.$router.push("/")):this.errors.login="This user does not exist"}else this.errors.login="Something went wrong"}},nameValidation(e){const t=/[a-zA-Z\s]+/;return t.test(e)},phoneValidation(e){const t=/^[1-9\s\-+*#()]+$/;return t.test(e)}}},Q=K,W=(0,c.Z)(Q,R,G,!1,null,"a771b9d8",null),X=W.exports,Y={name:"LoginView",components:{Login:X}},ee=Y,te=(0,c.Z)(ee,z,M,!1,null,null,null),se=te.exports,oe=s(3822);o.ZP.use(oe.ZP);var re=new oe.ZP.Store({state:{user:null},getters:{user:e=>e.user},mutations:{setUser(e,t){e.user=t,localStorage.setItem("user",JSON.stringify(t))},removeUser(e){e.user=null,localStorage.removeItem("user")}},actions:{}}),ne=(e,t,s)=>{const o=localStorage.getItem("user");re.getters.user||o?(re.getters.user||re.commit("setUser",JSON.parse(o)),s()):s("/login")};o.ZP.use(C.ZP);const ie=[{path:"/",name:"home",component:q,beforeEnter:ne},{path:"/login",name:"login",component:se}],ae=new C.ZP({routes:ie,mode:"history"});var le=ae;o.ZP.config.productionTip=!1,new o.ZP({router:le,store:re,render:e=>e(w)}).$mount("#app")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,r,n){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],n=e[c][2];for(var a=!0,l=0;l<o.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(a=!1,n<i&&(i=n));if(a){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,n,i=o[0],a=o[1],l=o[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(l)var c=l(s)}for(t&&t(o);u<i.length;u++)n=i[u],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},o=self["webpackChunknux_game_test"]=self["webpackChunknux_game_test"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(3292)}));o=s.O(o)})();
//# sourceMappingURL=app.d0e237d0.js.map